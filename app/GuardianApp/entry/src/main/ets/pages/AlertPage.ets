
import { AlertRecord, AlertType } from '../model/Types';
import { MockData } from '../utils/MockData';
import promptAction from '@ohos.promptAction';

@Component
export struct AlertPage {
  @State alerts: AlertRecord[] = MockData.alerts;

  build() {
    Column() {
      // Ê†áÈ¢òÊ†è + ËÆæÁΩÆÊåâÈíÆ
      Row() {
        Text('Ê∂àÊÅØ‰∏≠ÂøÉ')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .fontColor('#1E293B')
        Blank()
        Text('ËÆæÁΩÆ')
          .fontSize(14)
          .fontColor('#2563EB')
          .onClick(() => {
            promptAction.showActionMenu({
              title: 'Êä•Ë≠¶ÊèêÈÜíËÆæÁΩÆ',
              buttons: [
                { text: 'ÂºÄÂêØÂºπÁ™óÈÄöÁü•', color: '#1E293B' },
                { text: 'ÂºÄÂêØÁü≠‰ø°ÈÄöÁü•', color: '#1E293B' },
                { text: 'ÂèñÊ∂à', color: '#64748B' }
              ]
            });
          })
      }
      .width('100%')
      .padding(20)
      .backgroundColor(Color.White)

      // Êä•Ë≠¶ÂàóË°®
      List() {
        ForEach(this.alerts, (alert: AlertRecord) => {
          ListItem() {
            Column() {
              Row() {
                // Êä•Ë≠¶ÂõæÊ†á
                Text(alert.type === AlertType.SOS || alert.type === AlertType.FALL ? 'üö®' : '‚ö†Ô∏è')
                  .fontSize(24)
                  .margin({ right: 12 })
                
                Column() {
                  Text(alert.type)
                    .fontSize(16)
                    .fontWeight(FontWeight.Bold)
                    .fontColor(alert.type === AlertType.SOS ? '#EF4444' : '#F59E0B')
                  Text(`${alert.elderlyName} | ${alert.time}`)
                    .fontSize(12)
                    .fontColor('#94A3B8')
                    .margin({ top: 4 })
                }
                .alignItems(HorizontalAlign.Start)
                
                Blank()

                if (!alert.isRead) {
                  Circle({ width: 8, height: 8 })
                    .fill('#EF4444')
                }
              }
              .width('100%')

              Text(alert.description)
                .fontSize(14)
                .fontColor('#334155')
                .margin({ top: 12, left: 40 }) // ÂØπÈΩêÊñáÂ≠ó
                .width('85%')
            }
            .width('100%')
            .padding(16)
            .backgroundColor(Color.White)
            .borderRadius(12)
            .margin({ bottom: 12 })
          }
        })
      }
      .padding(20)
      .layoutWeight(1)
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F8FAFC')
  }
}
